{
    "collab_server" : "",
    "contents" : "library(data.table)\nlibrary(dplyr)\nlibrary(ggplot2)\norg = \"Hs\"\n#this script is for investgating known vs unknown peaks\nsource('/specific/netapp5_2/elkon/eldadshulman/datasets/Eldad/APA/functions/new_function_forsusegematrix.r')\n#/home/elkon/eldadshulman/datasets/Eldad/APA/lung_carcinom/mclust/motifs/UTR/\npath_motif = \"/home/elkon/eldadshulman/datasets/Eldad/APA/lung_carcinom/mclust/motifs/introns/try/\"\n\nif(org == \"Hs\") char.length.path <-  \"/home/elkon/Bowtie2_indexes/Hs/hg19/hg19_CHR_LENs.txt\"\nif(org == \"Mm\") char.length.path <-  \"/home/elkon/Bowtie2_indexes/Mm/mm10/mm10_chr_len.txt\"\n#motif_things <- function(path_motif)\n\nsetwd(path_motif)\n\nUTRusege.edge <- fread(\"Introns.bed\", showProgress = T, data.table = F)\n#\n#\n#\n# # #\n# # #\n# # #\n# # #\n#  system(\"bedtools slop -s -l 1 -r 150 -i Introns.bed -g /home/elkon/Bowtie2_indexes/Hs/hg19/hg19_CHR_LENs.txt > E_1_150_utrmotifs.bed\",wait = T)\n# #\n#  first.Dream.command <- paste0(\"/home/elkon/eldadshulman/bashscript/pipeline_\",\n#                               \"DREME_analysis.sh E_1_150_utrmotifs.bed\",\n#                                \" allutr_motifs_1_150 1 6 6 \", org, \" 0 1 &> \",\n#                                \"dream_allutr_1150.out\")\n#    system(command = first.Dream.command, wait = T)\n#\n# seq = system(command = 'cat DREME_norc_K_6_allutr_motifs_1_150/dreme.txt | grep \"MOTIF\" | head -1 | cut -d\" \" -f2', intern = T, wait = T)\n#\n#   fimo.command <- paste0(\"/home/elkon/eldadshulman/bashscript/\",\n#                          \"FIMO_search_for_DREME_motif_hits.sh \",\n#                          \"DREME_norc_K_6_allutr_motifs_1_150/dreme.txt \",\n#                          seq, \" allutr_motifs_1_150_pos.fa 1e-2 eightA_all1150\",\n#                         \" 1 E_1_150_utrmotifs.bed &> outfimo_jagain\")\n#\n#  system(command = fimo.command, wait = T)\n#\n#\n# fimo.path_8 = \"eightA_all1150_fimo/\"\n#\n# fimo_hist(PATH = fimo.path_8, sequance = \"AAAAAA\", left = 1, right = 150, hist_name = \"eightA_sample5_\")\n#\n# fimo_count_hist(PATH = fimo.path_8, sequance = \"AAAAAA\", left = 1, right = 150, y= UTRusege.edge, hist_name = \"eightA_sample5_\")\n#\n# genes.with.eightA <- fimo_genenames(PATH = fimo.path_8, sequance = \"AAAAAA\", left = 1 , right = 150, right_border = 140, left_border = 10)\n#\n# UTRusege.edge.filtered  <- UTRusege.edge[!(UTRusege.edge$V4 %in% genes.with.eightA),]\n#\n#\n#\n# write.table(file = \"filtered_UTR.bed\", x = UTRusege.edge.filtered, sep = \"\\t\", quote = F, col.names = F, row.names = F)\n\nsystem(paste0(\"bedtools slop -s -l 30 -r 160 -i Introns.bed -g \",char.length.path, \" > E_30_160_filtered_UTR.bed\"),\n       wait = T)\n\n\n\ndream.command <- paste0(\"/home/elkon/eldadshulman/bashscript/pipeline_DREME_analysis.sh \",\n                        \"E_30_160_filtered_UTR.bed filteredmotif160 1 5 7 \", org,\n                        \" 0 1 &> \",\n                        \"dream_allutr_1150.out\")\nsystem(command = dream.command, wait = T)\n\nseq = system(command = 'cat DREME_norc_K_6_filteredmotif/dreme.txt | grep \"MOTIF\" | head -1 | cut -d\" \" -f2', intern = T, wait = T)\n\nfimo.command <- paste0(\"/home/elkon/eldadshulman/bashscript/\",\n                       \"FIMO_search_for_DREME_motif_hits.sh \",\n                       \"DREME_norc_K_6_filteredmotif/dreme.txt \",\n                       seq, \" filteredmotif_pos.fa 1e-2 PAS\",\n                       \" 1 E_30_160_filtered_UTR.bed &> outfimo_jagain\")\n\nsystem(command = fimo.command, wait = T)\n\n\n\npath120 <- \"PAS_fimo/\"\n\nfimo_hist(PATH = path120, sequance = c(\"AATAAA\", \"ATTAAA\"), left = 30, right = 160, hist_name = \"PAS2_lung_pt3\")\n\n\nfimo_count_hist(PATH = path120  , sequance = \"AATAAA\", left = 30, right = 160, y= UTRusege.edge.filtered, hist_name = \"PAS_count_lung_pt5\")\ncreate_violin(org = \"Hs\", plot_name = \"vaiolin.pdf\", y = UTRusege.edge.filtered)\n\n\n",
    "created" : 1562835030848.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3150042392",
    "id" : "69CC465",
    "lastKnownWriteTime" : 1562868334,
    "last_content_update" : 1562868334,
    "path" : "/specific/netapp5_2/elkon/eldadshulman/datasets/Eldad/APA/lung_carcinom/mclust/int/int_motif_3.r",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 9,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}